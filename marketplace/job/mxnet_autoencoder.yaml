protocolVersion: 2
name: mxnet_autoencoder
type: job
version: 1.0.0
contributor: OpenPAI
description: mxnet, autoencoder

prerequisites:
  - protocolVersion: 2
    name: mxnet_example
    type: dockerimage
    version: 1.0.0
    contributor : OpenPAI
    description: caffe
    uri : openpai/pai.example.mxnet

taskRoles:
  train:
    instances: 1
    completion:
      minSucceededTaskCount: 1
    dockerImage: mxnet_example
    resourcePerInstance:
      cpu: 4
      memoryMB: 8192
      gpu: 1
    commands:
      - python mnist_sae.py --gpu

deployments:
  - name: mxnet_example
    taskRoles:
      train:
        preCommands:
          - pip install scipy scikit-learn
          - cd incubator-mxnet/example/autoencoder

defaults:
  deployment: mxnet_example
